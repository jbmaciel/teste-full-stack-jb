<div class="container mx-auto p-4 lg:px-32">
  <!-- Título de botão de criação -->
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold">Entidades</h1>
    <button class="btn btn-primary">Nova Entidade</button>
  </div>

  <label class="mb-4 input input-bordered w-full">
    <svg class="h-[1em] opacity-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <g stroke-linejoin="round" stroke-linecap="round" stroke-width="2.5" fill="none" stroke="currentColor">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.3-4.3"></path>
      </g>
    </svg>
    <input (input)="onFiltroChange($event)" type="text" [(ngModel)]="filtro" placeholder="Filtrar entidades" class="" />
    <button *ngIf="filtro" class="btn btn-dash btn-error" (click)="limparFiltro()">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" />
      </svg>

    </button>
  </label>

  <div class="overflow-x-auto bg-base-200 rounded-xl">
    <table class="table w-full">
      <thead>
        <tr>
          <th (click)="ordenar('nome_fantasia')" class="cursor-pointer">
            <div class="flex">
              Nome
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-4 ml-2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5" />
              </svg>
            </div>
          </th>
          <th (click)="ordenar('regiao')" class="cursor-pointer">
            <div class="flex">
              Região
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-4 ml-2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5" />
              </svg>
            </div>
          </th>
          <th>Especialidades</th>
          <th>Ativa</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let entidade of entidades">
          <td>{{ entidade.nome_fantasia }}</td>
          <td>{{ entidade.regional.nome }}</td>
          <td>{{ entidade.especialidades_medicas }}</td>
          <td>
            <svg *ngIf="entidade.ativa" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
            </svg>

            <svg *ngIf="!entidade.ativa" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
            </svg>

          </td>
          <td class="flex gap-2">
            <button class="btn btn-sm btn-info" (click)="visualizar(entidade.id)">
              <span>Visualizar</span>
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
              </svg>
            </button>
            <button class="btn btn-sm btn-warning" (click)="editar(entidade.id)">
              <span>Editar</span>
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
              </svg>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <p *ngIf="entidades.length === 0" class="text-center mt-4">Nenhum registro encontrado.</p>

  <div class="flex mx-auto w-full py-4 justify-center">
    <div class="join">
      <button class="join-item btn" [disabled]="paginacao.current_page === 1"
        (click)="mudarPagina(paginacao.current_page - 1)">
        «
      </button>

      <button *ngIf="paginacao.current_page > 2" class="join-item btn" (click)="mudarPagina(1)">1</button>
      <button *ngIf="paginacao.current_page > 3" class="join-item btn btn-disabled">...</button>

      <button *ngIf="paginacao.current_page > 1" class="join-item btn"
        (click)="mudarPagina(paginacao.current_page - 1)">
        {{ paginacao.current_page - 1 }}
      </button>

      <button class="join-item btn btn-active">{{ paginacao.current_page }}</button>

      <button *ngIf="paginacao.current_page < paginacao.last_page" class="join-item btn"
        (click)="mudarPagina(paginacao.current_page + 1)">
        {{ paginacao.current_page + 1 }}
      </button>

      <button *ngIf="paginacao.current_page < paginacao.last_page - 2" class="join-item btn btn-disabled">...</button>
      <button *ngIf="paginacao.current_page < paginacao.last_page - 1" class="join-item btn"
        (click)="mudarPagina(paginacao.last_page)">
        {{ paginacao.last_page }}
      </button>

      <button class="join-item btn" [disabled]="paginacao.current_page === paginacao.last_page"
        (click)="mudarPagina(paginacao.current_page + 1)">
        »
      </button>
    </div>
  </div>

</div>
